# 键盘鼠标事件记录使用说明

## 启用键盘鼠标事件记录

### 步骤 1: 勾选选项
1. 启动应用后，在界面上找到 **"启用键盘和鼠标事件记录（需要辅助功能权限）"** 复选框
2. **勾选**此选项

### 步骤 2: 授予辅助功能权限
1. 打开 **"系统设置"** > **"隐私与安全性"** > **"辅助功能"**
2. 找到 **"录屏软件"** 并勾选
3. 如果应用不在列表中，需要：
   - 先启动应用并勾选选项
   - 系统会提示需要权限
   - 然后到系统设置中授权

### 步骤 3: 重新开始录制
**重要**：切换选项后，需要**重新开始录制**才能生效！

1. 如果正在录制，先停止录制
2. 勾选"启用键盘和鼠标事件记录"选项
3. 点击"开始录制"
4. 进行键盘和鼠标操作
5. 停止录制
6. 检查 `events_*.json` 文件是否包含事件

## 调试信息

如果事件仍然没有被记录，请：

1. **查看控制台输出**：
   - 运行 `./测试应用.sh` 查看详细输出
   - 应该看到：
     - "键盘监听已启动"
     - "鼠标监听已启动"
     - "记录鼠标点击: ..."（当点击时）
     - "保存事件: 队列中有 X 个事件"

2. **检查权限**：
   - 确保在"系统设置 > 隐私与安全性 > 辅助功能"中已授权
   - 如果已授权但仍不工作，尝试取消授权后重新授权

3. **检查事件文件**：
   - 打开 `events_*.json` 文件
   - 应该包含 `key_press`, `key_release`, `mouse_click`, `mouse_move` 等事件

## 常见问题

**Q: 为什么 events JSON 文件是空的？**
A: 
- 可能没有勾选"启用键盘和鼠标事件记录"选项
- 可能没有授予辅助功能权限
- 可能切换选项后没有重新开始录制

**Q: 应用崩溃了怎么办？**
A: 
- 取消勾选"启用键盘和鼠标事件记录"选项
- 应用会切换回仅录制屏幕的模式

**Q: 如何确认监听器已启动？**
A: 
- 运行 `./测试应用.sh` 查看控制台输出
- 应该看到"键盘监听已启动"和"鼠标监听已启动"的消息

